#!/bin/bash

# ============================================================
# Script:   SAR-new
# Purpose:  Main command-line interface script to create and
#           initialize one or more new SAR projects (repositories).
#
# Note:     N/A
#
# Version:  0.xx.x
# Author:   Felipe Figueiredo
# Created:  2025-11-11
#
# ------------------------------------------------------------
# QC Date:  YYYY-MM-DD
# ------------------------------------------------------------
# ============================================================

SAR_LANG="en"
OPTIND=1

while getopts "l:h" opt; do
    case $opt in
	l) SAR_LANG=${OPTARG}
	   if [[  "$SAR_LANG" != "pt" && "$SAR_LANG" != "en" ]]; then
	       echo "Supported languagues: pt and en (received $SAR_LANG)"
	       exit
	   fi
	   ;;
	h) #display help syntax
	    echo "help syntax"
	    exit 0
	    ;;
	\?) # Invalid option
            echo "Error: Invalid option"
            exit 0
	    ;;
    esac
done

shift "$((OPTIND-1))"

for SAR in $@; do
echo "Preparing local repository: $SAR"
mkdir -p "$SAR"
cd "$SAR"
SAR-basedirs
SAR-basefiles -l $SAR_LANG
SAR-init
cd -
done
