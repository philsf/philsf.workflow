#!/bin/bash

# ============================================================
# Script:   SAR-remote-set-all
# Purpose:  Run SAR-remote-set in batch for a list of SAR project 
#           directories to create bare repositories and set up remotes.
#
# Note:     N/A
#
# Version:  0.xx.x
# Author:   Felipe Figueiredo
# Created:  2025-11-11
#
# ------------------------------------------------------------
# QC Date:  YYYY-MM-DD
# ------------------------------------------------------------
# ============================================================

if [[ "$2" == "" ]]
then
    echo "Usage: SAR-remote-set-all REMOTE REMOTES_DIR [SAR_LIST]"
    exit
fi

REMOTENAME=$1
REMOTES_DIR=$2
shift 2

# accept optional SAR_LIST as argument
SAR_LIST=$@

if [[ "$@" == "" ]]
then
    SAR_LIST=*SAR*
fi

for SAR in $SAR_LIST
do
    cd "$SAR"
    SAR-remote-set "$REMOTENAME" "$REMOTES_DIR"
    cd - > /dev/null
done
