---
title: "Analytical Plan for title"
subtitle: 'DOCUMENT: SAP-yyyy-NNN-XX-v01'
author: '**From:** Felipe Figueiredo **To:** ___'
date: '**Date:** yyyy-mm-dd'
output:
  html_document:
    fig_caption: yes
    fig_height: 6
    fig_width: 6
    keep_md: yes
    number_sections: yes
    toc: yes
  pdf_document:
    number_sections: yes
    toc: yes
  word_document:
    fig_caption: yes
    fig_height: 6
    fig_width: 6
    reference_docx: misc/style_SAP_en.docx
    toc: yes
# toc-title: "Sum√°rio"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_knit$set(root.dir = normalizePath(".."))
options(scipen = 999)
library(pander)
library(knitr)
library(philsfmisc)
panderOptions('table.style', 'rmarkdown')
panderOptions('table.split.table', 160)
```

---

**Document version**

```{r history}
Version <- c("01")
Changes <- c("Initial version")
history <- cbind(Version, Changes)
colnames(history) <- c("Version", "Alterations")
# pander(history, split.cells = 70)
kable(history)
```

---

# Abbreviations

- BMI: body mass index
- CI: confidence interval
- d: Cohen's D effect size
- IQR: interquartile range
- SD: standard deviation

# Introduction

## Context

## Objectives

## Hypotheses

# Data

```{r cleaning, include=FALSE}
source("scripts/input.R", encoding = 'UTF-8')
```

## Raw data

## Analytical dataset

All variables in the analytical set were labeled according to the raw data provided and values were labeled according to the data dictionary for the preparation of production-quality results tables and figures.

After the cleaning process `r ncol(analytical)` variables were included in the analysis with `r nrow(analytical)` observations.
Table 1 shows the structure of the analytical dataset.

```{r analytical data}
analytical_mockup %>%
  pander(caption = "**Table 1** Analytical dataset structure after variable selection and cleaning.")
```

The analytical dataset will be included in the private version of the report, and will be omitted from the public version of the report.

# Study variables

## Primary and secondary outcomes

## Covariates

# Statistical methods

## Statistical analyses

### Descriptive analyses

The epidemiological profile of each study group
<!-- groups -->
will be described at baseline.
Demographic and clinical variables will be described as
mean (SD)
<!-- median (IQR) -->
or as counts and proportions (%), as appropriate.
Distributions will be summarized in tables and visualized in exploratory plots.

### Inferential analyses

All comparisons between groups will be performed as univariate analyses.
Continuous variables will be compared between groups with the
independent t test with Welch correction.
<!-- paired t test with Welch correction. -->
<!-- Wilcoxon test. -->
Differences in distribution of categorical variables will be assessed with the
Fisher exact test.
<!-- chi-square test. -->
<!-- McNemar test. -->

### Statistical modeling

## Significance and Confidence Intervals

All analyses will be performed using the significance level of 5%.
All significance hypothesis tests and confidence intervals computed will be
two-tailed.
<!-- left-tailed. -->
<!-- right-tailed. -->

## Study size and Power

```{r}
n <- analytical %>%
  count(group) %>%
  pull(n)
n1 <- n[1]
n2 <- n[2]
total <- sum(n)
d <- pwr::pwr.t2n.test(n1 = n1, n2 = n2, power = .8, sig.level = .05)$d %>%
  format.float()
d <- pwr::pwr.t.test(n = total/2, power = .8, sig.level = .05)$d %>%
  format.float()
```

<!-- Study groups were balanced and the total sample size was `r total` including all groups. -->

<!-- Study groups were not balanced with -->
<!-- group1 with `r n1` participants -->
<!-- and -->
<!-- group2 with `r n2` participants -->
<!-- with a total study size of `r total`. -->
<!-- This power analysis adjusts for different group sizes. -->

<!-- With these group sizes a t test can detect an effect size as large as -->
<!-- **d = `r d`** -->
<!-- with 80% power and 5% significance level (Cohen, 1988). -->

N/A

## Statistical packages

This analysis will be performed using statistical software `R` version `r getRversion()`.

# Exceptions and Observations

# References

- **SAR-yyyy-NNN-XX-v01** -- title
<!-- - Cohen, J. (1988). Statistical power analysis for the behavioral sciences (2nd Ed.). New York: Routledge. -->

# Appendix

## Availability

Both this analytical plan and the corresponding analysis report (**SAR-yyyy-NNN-XX-v01**) can be downloaded in the following address:

https://github.com/philsf-biostat/SAR-yyyy-NNN-XX/

